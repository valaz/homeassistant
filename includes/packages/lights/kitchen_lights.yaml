kitchen_lights:
  automation:
    - alias: "[Kitchen Lights] Toggle Sink Light"
      mode: restart
      initial_state: true
      trigger:
        - platform: state
          entity_id: sensor.kitchen_light_switch_action
          to: "single_left"
      action:
        - service: switch.toggle
          entity_id: switch.kitchen_sink_plug

    - alias: "[Kitchen Lights] Turn on sink light if there is movement"
      trigger:
        - platform: state
          entity_id: binary_sensor.kitchen_motion_sensor_occupancy
          to: "on"
      condition:
        - condition: numeric_state
          entity_id: "sensor.kitchen_motion_sensor_illuminance"
          below: 2000
      action:
        - service: switch.turn_on
          target:
            entity_id: switch.kitchen_sink_plug

    - alias: "[Kitchen Lights] Turn off sink light if there is no movements"
      trigger:
        - platform: state
          entity_id: binary_sensor.kitchen_motion_sensor_occupancy
          to: "off"
          for: "00:01:00"
        - platform: event
          event_type: timer.finished
          event_data:
            entity_id: timer.bathroom_light_turn_off
      action:
        - service: switch.turn_off
          target:
            entity_id: switch.kitchen_sink_plug
